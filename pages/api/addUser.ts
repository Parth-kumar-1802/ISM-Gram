// Next.js API route support: https://nextjs.org/docs/api-routes/introduction
import type { NextApiRequest, NextApiResponse } from 'next'
import { UserBody } from '../../typings'
import names from './names.json'

type Data = {
  message: string
}

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse<Data>
) {
//   const arrayRandom = [
//   "Alexia Cobb",
//   "Raphael Petersen",
//   "Fernanda King",
//   "Julian Newton",
//   "Braelynn Dudley",
//   "Colter Tucker",
//   "Esther Steele",
//   "Elian Campos",
//   "Sutton Cuevas",
//   "Brecken Johnson",
//   "Emma Harvey",
//   "Cayden Sullivan",
//   "Melanie Andrews",
//   "Lukas Combs",
//   "Irene Vaughan",
//   "Castiel Rasmussen",
//   "Esperanza Calderon",
//   "Oakley Page",
//   "Cataleya Williams",
//   "Oliver Joseph",
//   "Gracelynn Gilmore",
//   "Vihaan Hinton",
//   "Jaelynn Nash",
//   "Chandler Pena",
//   "Rachel Felix",
//   "Rodney Roach",
//   "Lyanna Dyer",
//   "Atreus Olson",
//   "Isabel Avalos",
//   "Coen Ayala",
//   "Blair Diaz",
//   "Nathan Christian",
//   "Anahi Kirk",
//   "Alessandro Gregory",
//   "Alaya Ingram",
//   "Tripp McMillan",
//   "Oakleigh Nash",
//   "Chandler Galindo",
//   "Corinne Ruiz",
//   "Austin Clements",
//   "Cara Parrish",
//   "Karsyn Hill",
//   "Hannah Zamora",
//   "Quentin Acosta",
//   "Kaia Lawson",
//   "Lane Sierra",
//   "Marceline Franco",
//   "Gage Mendez",
//   "Londyn Fitzpatrick",
//   "Blaze Benjamin",
//   "Jianna Connor",
//   "Princeton Melendez",
//   "Bethany Rogers",
//   "Colton Price",
//   "Piper Whitehead",
//   "Zayd McClure",
//   "Estella Keith",
//   "Jagger Montgomery",
//   "Evangeline Richardson",
//   "Robert Best",
//   "Lexie Espinoza",
//   "Dallas Walsh",
//   "Leia Wolfe",
//   "Donovan Pratt",
//   "Ailani Whitehead",
//   "Zayd Corona",
//   "Marianna Cervantes",
//   "Kamari Shaffer",
//   "Alanna Harmon",
//   "Roberto Coleman",
//   "Julia Vaughan",
//   "Castiel Stout",
//   "Chana Underwood",
//   "Reece Chapman",
//   "Zuri Long",
//   "Jace Shaw",
//   "Emersyn Dennis",
//   "Emanuel Tate",
//   "Skye Hamilton",
//   "Jason Salinas",
//   "Royalty Stout",
//   "Callahan Ross",
//   "Peyton Middleton",
//   "Misael Watson",
//   "Hailey Burton",
//   "Zander Sampson",
//   "Meilani Maynard",
//   "Landry Horn",
//   "Avah Pierce",
//   "Nicolas Gregory",
//   "Alaya Maddox",
//   "Lyric Moody",
//   "Elaine Orozco",
//   "Keanu Beasley",
//   "Jaylah Burns",
//   "August Lang",
//   "Amirah Curtis",
//   "Muhammad Barnett",
//   "Harlow Jackson",
//   "Sebastian Church",
//   "Ayleen Hale",
//   "Ezequiel Ortega",
//   "Lilah Harding",
//   "Brodie Macias",
//   "Adley Campbell",
//   "Christopher Adams",
//   "Stella Reese",
//   "Alijah Booth",
//   "Zariyah Fisher",
//   "Gael Sheppard",
//   "Veda Galvan",
//   "Kingsley Osborne",
//   "Shelby Snyder",
//   "Forrest Moreno",
//   "Mary Davidson",
//   "Dante Osborne",
//   "Shelby Flores",
//   "Lincoln Cooper",
//   "Serenity Maldonado",
//   "Javier Bartlett",
//   "Aubrielle Jones",
//   "William Hodge",
//   "Coraline McLean",
//   "Crosby Frazier",
//   "Octavia Haynes",
//   "Kason Klein",
//   "Elianna Stout",
//   "Callahan Velez",
//   "Megan brien",
//   "Riley Chan",
//   "Hattie Anthony",
//   "Shiloh Andersen",
//   "Zoie Leonard",
//   "Ricardo Howe",
//   "Persephone Bell",
//   "Emmett Simmons",
//   "Reagan Chase",
//   "Otis Brady",
//   "Ryan Solomon",
//   "Musa Arroyo",
//   "Kyra Benjamin",
//   "Kyro Herring",
//   "Denver Heath",
//   "Lionel Thornton",
//   "Haisley McCullough",
//   "Briar Conway",
//   "Ryann Huber",
//   "Mac Harrington",
//   "Legacy Tyler",
//   "Emmitt Garcia",
//   "Amelia Woods",
//   "Zion Marquez",
//   "Milani Lozano",
//   "Boone Nava",
//   "Scout Bass",
//   "Landen Flores",
//   "Emilia Acosta",
//   "Jensen Smith",
//   "Olivia Santos",
//   "Walker Jordan",
//   "Adalynn McBride",
//   "Denver Sexton",
//   "Ellen Cameron",
//   "Rayan Nelson",
//   "Everly Olsen",
//   "Skyler Livingston",
//   "Milena Rivera",
//   "Charles Phillips",
//   "Naomi James",
//   "Jaxson Cooper",
//   "Serenity Yoder",
//   "Johan Flowers",
//   "Ariya Stevens",
//   "Zachary Daugherty",
//   "Magdalena Gill",
//   "Matthias Kaur",
//   "Holland Hayes",
//   "Legend Owens",
//   "Amaya Yu",
//   "Bryant Delgado",
//   "Alani Gibson",
//   "Tyler Glover",
//   "Alessia Daugherty",
//   "Turner Yates",
//   "Charley Richard",
//   "Ahmed Correa",
//   "Valery Simpson",
//   "Elliott Garrison",
//   "Cadence Munoz",
//   "Justin Dejesus",
//   "Julissa Hanna",
//   "Aydin Giles",
//   "Bailee Branch",
//   "Keenan O’Neal",
//   "Treasure Saunders",
//   "Kasen Hess",
//   "Kaliyah Castaneda",
//   "Collin Barnett",
//   "Harlow Taylor",
//   "Jackson Cobb",
//   "Aviana Tapia",
//   "Samir Archer",
//   "Kadence Duke",
//   "Kalel Baldwin",
//   "Esmeralda Brandt",
//   "Damir Holloway",
//   "Mae Parrish",
//   "Karsyn Huang",
//   "Francesca Flowers",
//   "Saul Livingston",
//   "Milena Singh",
//   "Louis Christensen",
//   "Carmen Hobbs",
//   "Brendan Rojas",
//   "Adaline Gallagher",
//   "Marcos Moses",
//   "Karter Solis",
//   "Ronin Parker",
//   "Aubrey McMahon",
//   "Jakob Peterson",
//   "Caroline Hanson",
//   "Khalil Banks",
//   "Cali Spears",
//   "Ameer Hail",
//   "Lainey Shelton",
//   "Leonel Miller",
//   "Isabella Owens",
//   "Adriel Todd",
//   "Zariah Harvey",
//   "Cayden Harvey",
//   "Nicole Maynard",
//   "Landry Santana",
//   "Myra Duncan",
//   "Avery Arias",
//   "Aleah Underwood",
//   "Reece Cohen",
//   "Destiny Hobbs",
//   "Brendan Whitney",
//   "Madalynn West",
//   "Diego Blackburn",
//   "Frida House",
//   "Yehuda Maxwell",
//   "Kyla Burke",
//   "Jax Singleton",
//   "Malaysia Fisher",
//   "Gael Bishop",
//   "Brooklynn O’Connor",
//   "Princeton Correa",
//   "Valery Frye",
//   "Franco Brown",
//   "Charlotte Yang",
//   "Malcolm Robles",
//   "Felicity Ball",
//   "Shane Garner",
//   "Jacqueline York",
//   "Leandro Shelton",
//   "Makenzie Shepherd",
//   "Ronald Cordova",
//   "Florence Ware",
//   "Tadeo Ellison",
//   "Raina Gonzalez",
//   "Ethan Beck",
//   "Gia Yates",
//   "Braylon Novak",
//   "Kaiya McKee",
//   "Bjorn Hopkins",
//   "Gabriela McCormick",
//   "Jasiah Knight",
//   "Gracie Dyer",
//   "Atreus Monroe",
//   "Carly Sierra",
//   "Dayton Schaefer",
//   "Mavis Lambert",
//   "Mario Hill",
//   "Hannah Shah",
//   "Zain Schneider",
//   "Delaney Fox",
//   "Antonio Hodge",
//   "Coraline Orozco",
//   "Keanu Hoffman",
//   "Aspen Knight",
//   "Beckett Hess",
//   "Kaliyah Esquivel",
//   "Bridger Heath",
//   "Amani Clements",
//   "Fisher Valentine",
//   "August Sheppard",
//   "Trent Wright",
//   "Lily Monroe",
//   "Colby Gilmore",
//   "Chanel Phillips",
//   "Andrew Rivera",
//   "Lillian Magana",
//   "Rey Saunders",
//   "Meadow Graves",
//   "Cesar Duncan",
//   "Elise Moreno",
//   "Myles Schaefer",
//   "Mavis McCarty",
//   "Blaise George",
//   "Adelyn Walker",
//   "Luke Mejia",
//   "Saylor Freeman",
//   "Jayce Le",
//   "Myla Valencia",
//   "Dax Sampson",
//   "Meilani Dalton",
//   "Fletcher Garrison",
//   "Cadence Wilson",
//   "Daniel Nielsen",
//   "Vienna Costa",
//   "Kenji Lambert",
//   "Nina Roman",
//   "Kian Reyna",
//   "Luella Harvey",
//   "Cayden Nelson",
//   "Everly Hart",
//   "Joel Maxwell",
//   "Kyla Crosby",
//   "Tristen Benton",
//   "Anais Ray",
//   "Arlo Estrada",
//   "Sawyer Waters",
//   "Maximilian Reyna",
//   "Luella Hampton",
//   "Hank Duffy",
//   "Addisyn Lucero",
//   "Felipe Riley",
//   "Kayla Arias",
//   "Alec Huber",
//   "Raquel Ponce",
//   "Langston Copeland",
//   "Dayana Burns",
//   "August Buchanan",
//   "Maryam Manning",
//   "Seth Sawyer",
//   "Marina Perez",
//   "Owen Patel",
//   "Madeline Rosario",
//   "Jedidiah Phan",
//   "Jovanny Mcbride",
// "Julieta Spence",
// "Jairo Ayala",
// "Alaya Craig",
// "Jett Fernandez",
// "Carla Buck",
// "Boston Mcfarland",
// "Amiah Flynn",
// "Brycen Woodard",
// "Kyndall Morse",
// "Darian Benjamin",
// "Aydin Avila",
// "Amirah Silva",
// "Haiden Miranda",
// "Mckayla Carlson",
// "Urijah Berger",
// "Kaylen Bautista",
// "Bryanna Cooper",
// "Johan Cuevas",
// "Kaydence Sellers",
// "Denver Lloyd",
// "Alaysia Steele",
// "Kingsley Acevedo",
// "Xavi Hamilton",
// "Kaysen Kramer",
// "Yurem Knight",
// "Saanvi Cooley",
// "Sullivan Castro",
// "Aaden Pratt",
// "Joslyn Mccoy",
// "Ayan Evans",
// "Martha Bernard",
// "Makayla Compton",
// "Jagger Vaughan",
// "Ellison Holt",
// "Ireland Perry",
// "Bridgette Rich",
// "Terrell Lowe",
// "Esperanza Werner",
// "Rayan Dillon",
// "Niamh Mackenzie",
// "Kalel Atkinson",
// "Ailani Bartlett",
// "Maddux Riddle",
// "Kaelynn Haney",
// "Cedric Townsend",
// "Mary Ward",
// "Sincere Conley",
// "Kendall Harrell",
// "Matilda Francis",
// "Ignacio Franco",
// "Raelyn Johns",
// "Carmen Potter",
// "Maximo Novak",
// "Marjorie Werner",
// "Kylen Grimes",
// "Joelle Oconnor",
// "Samson Santos",
// "Arnav Finley",
// "Elianna Ferrell",
// "Zariyah Mcgee",
// "Rolando Roach",
// "Hezekiah Stout",
// "Eden Bruce",
// "Dalia Ramirez",
// "Lilianna Church",
// "Brynley Roy",
// "Ameerah Leblanc",
// "Braeden Cole",
// "Joy Franco",
// "Yusuf Potts",
// "Maddison Duran",
// "Camryn Barber",
// "Niklaus Tapia",
// "Ayleen Davenport",
// "Jovani Esparza",
// "Journey Hatfield",
// "Ariyah Charles",
// "Elaina Pitts",
// "Jairo Dickson",
// "Jaida Koch",
// "Mckinley Wilkins",
// "Dario Montes",
// "Makai Faulkner",
// "Annabel Sandoval",
// "Jakayla Horne",
// "Kadence Chaney",
// "Houston Parrish",
// "Sanaa Mclean",
// "Jamarion Bowers",
// "Cory Acevedo",
// "Maggie Salazar",
// "Makaylah Fields",
// "Amarie Vasquez",
// "Jazlene Powell",
// "Austen Hodge",
// "Jaron Maddox",
// "Aubrielle Mcneil",
// "Jordin Carey",
// "Cecelia Gomez",
// "Ethen Leach",
// "Greta Nolan",
// "Reuben Callahan",
// "Rosalinda Mccullough",
// "Whitley Davis",
// "Lucas Robinson",
// "Nora Guerrero",
// "Bryce Jensen",
// "Jane Cline",
// "Cullen Marshall",
// "Adalyn Rosario",
// "Jedidiah Galindo",
// "Corinne Chase",
// "Otis Wolfe",
// "Hallie Esquivel",
// "Bridger Rivers",
// "Kiana Lawrence",
// "Kaleb Wu",
// "Liana Lu",
// "Duncan Eaton",
// "Miley Collins",
// "Miles Simon",
// "Kalani Le",
// "Damien Villegas",
// "Jessie Chavez",
// "Ian Flores",
// "Emilia Marsh",
// "Bo Rose",
// "Magnolia Lindsey",
// "Jayson Woods",
// "Reese Bailey",
// "Axel Burke",
// "Vera Hanson",
// "Khalil Ahmed",
// "Jolie Wilcox",
// "Jerry Shepard",
// "Noor Howe",
// "Alaric Ware",
// "Eileen Parrish",
// "Karsyn Rivera",
// "Lillian Armstrong",
// "Grant Jaramillo",
// "Guadalupe Horne",
// "Zev Sanders",
// "Everleigh Ballard",
// "Kenzo Yu",
// "Navy Peralta",
// "Dangelo Fields",
// "Annie Turner",
// "Joshua Best",
// "Lexie Washington",
// "Juan Ellison",
// "Raina Barron",
// "Dustin Ayala",
// "Blair Morrison",
// "Maximus Conner",
// "Alondra Waller",
// "Marley Aguilar",
// "Josie Gregory",
// "Travis Yoder",
// "Emerie McCann",
// "Heath Tucker",
// "Esther Barnes",
// "Damian Kane",
// "Ellianna Haley",
// "Leif Pierce",
// "Arabella Schmidt",
// "Zayden Kennedy",
// "Brianna Maldonado",
// "Javier Wilcox",
// "Ashlyn Kramer",
// "Kylan Lee",
// "Scarlett Ponce",
// "Langston Pratt",
// "Ailani Randolph",
// "Eugene Stanley",
// "Gracelyn Collier",
// "Edison Andrade",
// "Emmy Hurst",
// "Neil Jimenez",
// "Adeline English",
// "Junior Jordan",
// "Adalynn Boyd",
// "Dean Newman",
// "Oaklynn Beasley",
// "Stanley Harrell",
// "Kara Rodgers",
// "Mathias Donnell",
// "Bellamy Tapia",
// "Samir Lewis",
// "Ellie Vega",
// "Aidan Sampson",
// "Meilani Crosby",
// "Tristen Singh",
// "Vivienne Levy",
// "Harold Choi",
// "Karla Jordan",
// "Sawyer Shepard",
// "Noor Newman",
// "Anderson Huerta",
// "Dulce Rollins",
// "Wes Moody",
// "Elaine Stokes",
// "Santana Small",
// "Zaria Sellers",
// "Madden Richardson",
// "Allison Duffy",
// "Kyng Landry",
// "Brynleigh Chase",
// "Otis Wiggins",
// "Capri Mueller",
// "Albert Ray",
// "Ruth Kim",
// "Roman Rosario",
// "Louisa Grimes",
// "Harlan Henry",
// "Summer Farmer",
// "Jamison Foster",
// "Brielle Kerr",
// "Louie Camacho"
//   ]
  const firstNames = names.randomFirstNames;
  const lastNames = names.randomLastNames;
  const indexFirst=Math.floor(Math.random()* firstNames.length);
  const firstName=firstNames[indexFirst];

  const indexLast=Math.floor(Math.random()* lastNames.length);
  const lastName=firstNames[indexLast];

  const randomName = firstName+" "+lastName;

  const data:UserBody=JSON.parse(req.body);

  const mutations={
    mutations:[
      {
        create:{
          _type:'user',
          username:randomName,
          realname: data.username,
          blockUser:false,
          email:data.email,
          profileImg:data.profileImg,
          tweets:[],
          savedTweets:[],
          likedTweets:[],
        }
      }
    ]
  }
  const apiEndpoint=`https://${process.env.NEXT_PUBLIC_SANITY_PROJECT_ID}.api.sanity.io/v2021-06-07/data/mutate/${process.env.NEXT_PUBLIC_SANITY_DATASET}`;
  
  const result=await fetch(apiEndpoint,{
    headers:{
      'content-type':'application/json',
      Authorization:`Bearer ${process.env.SANITY_API_TOKEN}`
    },
    body:JSON.stringify(mutations),
    method:'POST'
  })

  // console.log("User Added!");

  const json=await result.json();

  console.log(json);

  res.status(200).json({ message:'Added!' })
}
